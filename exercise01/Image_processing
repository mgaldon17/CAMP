import os
import matplotlib
import matplotlib.pyplot as plt

from imageio import imread
from skimage import img_as_float
from skimage.exposure import equalize_adapthist
from skimage.filters import gaussian

im = imread(os.path.join('data','mrihead.jpg'))

fig, axes = plt.subplots(figsize=(5,5))
axes.imshow(im, cmap=plt.cm.gray, interpolation="nearest")
axes.set_xlabel('Column')
axes.set_ylabel('Row')
axes.set_title('mrihead.jpg')

fig, axes = plt.subplots(figsize=(5,5))
axes.imshow(im[:100,:150], cmap=plt.cm.gray, interpolation="nearest")
axes.set_xlabel('Column')
axes.set_ylabel('Row')
axes.set_title('mrihead.jpg cropped')

im1 = equalize_adapthist(im)

fig, axes = plt.subplots(figsize=(5,5))
axes.imshow(im1, cmap=plt.cm.gray, interpolation="nearest")
axes.set_title('mrihead.jpg enhanced1')

im2 = gaussian(equalize_adapthist(im), 0.5)

fig, axes = plt.subplots(figsize=(20,20))
axes.imshow(im2, cmap=plt.cm.gray, interpolation="nearest")
axes.set_title('mrihead.jpg enhanced2')

im3 = im2 - img_as_float(im)
fig, axes = plt.subplots(1,3, figsize=(15,5))
axes[0].imshow(im, cmap=plt.cm.gray, interpolation="nearest")
axes[0].set_title('original')
axes[1].imshow(im2, cmap=plt.cm.gray, interpolation="nearest")
axes[1].set_title('enhanced')
axes[2].imshow(im3, cmap=plt.cm.gray, interpolation="nearest")
axes[2].set_title('difference')

plt.show()